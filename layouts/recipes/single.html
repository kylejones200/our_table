{{ define "main" }}
<style>
.recipe-image {
  margin: 2rem 0;
  text-align: center;
}

.recipe-image img {
  width: 100%;
  max-width: 600px;
  height: auto;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.image-credit {
  font-size: 0.8rem;
  color: #666;
  margin-top: 0.5rem;
  font-style: italic;
}

.recipe-emoji {
  text-align: center;
  margin: 2rem 0;
  padding: 2rem;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  border-radius: 12px;
}

.emoji-large {
  font-size: 4rem;
  line-height: 1;
}

@media (max-width: 768px) {
  .emoji-large {
    font-size: 3rem;
  }
}
</style>
<div class="container">
  <article class="recipe">
    <header class="recipe-header">
      <h1>{{ .Title }}</h1>
      {{ with .Params.description }}
        <p class="recipe-description">{{ . }}</p>
      {{ end }}
      
      <div class="recipe-meta-grid">
        {{ with .Params.prep_time }}
        <div class="meta-item">
          <span class="meta-label">Prep Time</span>
          {{ . }}
        </div>
        {{ end }}
        {{ with .Params.cook_time }}
        <div class="meta-item">
          <span class="meta-label">Cook Time</span>
          {{ . }}
        </div>
        {{ end }}
        {{ with .Params.total_time }}
        <div class="meta-item">
          <span class="meta-label">Total Time</span>
          {{ . }}
        </div>
        {{ end }}
        {{ with .Params.yield }}
        <div class="meta-item">
          <span class="meta-label">Serves</span>
          {{ . }}
        </div>
        {{ end }}
      </div>
      
      {{ with .Params.image }}
        <div class="recipe-image">
          <img src="{{ . }}" alt="{{ $.Title }}" />
          {{ with $.Params.image_credit }}
            <p class="image-credit">{{ . }}</p>
          {{ end }}
        </div>
      {{ else if .Params.image_emoji }}
        <div class="recipe-emoji">
          <span class="emoji-large">{{ .Params.image_emoji }}</span>
        </div>
      {{ end }}
    </header>

    <div class="recipe-content">
      {{ .Content }}
    </div>

    {{ with .Params.nutrition }}
    <section class="nutrition">
      {{ partial "shortcodes/nutrition.html" . }}
    </section>
    {{ end }}

    {{ with .Params.allergens }}
    <section class="allergens">
      {{ partial "shortcodes/allergens.html" $ }}
    </section>
    {{ end }}

    <footer class="recipe-footer">
      <div class="recipe-tags">
        {{ with .Params.cuisines }}
          <p><strong>Cuisines:</strong> {{ delimit . ", " }}</p>
        {{ end }}
        {{ with .Params.courses }}
          <p><strong>Courses:</strong> {{ delimit . ", " }}</p>
        {{ end }}
        {{ with .Params.diets }}
          <p><strong>Diets:</strong> {{ delimit . ", " }}</p>
        {{ end }}
        {{ with .Params.tags }}
          <p><strong>Tags:</strong> {{ delimit . ", " }}</p>
        {{ end }}
      </div>
    </footer>
  </article>
</div>
{{ end }}
